<%= render 'components/breadcrumb', breadcrumbs:  [
  { text: 'Home', path: root_path},
  { text:  "#{@restaurant.name}", path: restaurant_path(@restaurant) },
  { text: 'Branches'}
] %>

<div class='p-5'>
  <div class='flex justify-between items-center'>
    <h1 class='font-semibold uppercase'>Branches(<%= @restaurant.locations.size %>) </h1>
    <% if current_user&.admin? %>
      <%= link_to new_location_restaurant_path, class: "btn btn-primary capitalize" do %>
        <i class="fa-solid fa-plus"></i>
        <span>Add a new branch</span>
      <% end %>
    <% end %>
  </div>

  <div class="flex flex-col gap-5 sm:w-3/4 text-sm">
    <% @restaurant.locations.each do |location| %>
      <div class="flex justify-between items-center bg-gray-100 p-3 bg-white shadow-lg rounded relative">
        <div class="flex items-center gap-5">
          <div class='flex items-center gap-5'>
            <% if @restaurant.logo.attached? %>
              <%= image_tag @restaurant.logo, class: 'w-full h-16 object-cover' %>
            <% else %>
              <div class='w-16 h-16 bg-gray-200'></div>
            <% end %>
          </div>
          <p class='font-semibold capitalize text-gray-900'>
          <%= location&.building_name %>, <%= location.area %>, <%= location.city %>
          </p>

        </div>

        <div data-controller="dropdown" class='relative'>
          <button data-action="click->dropdown#toggle" class="flex items-center gap-1 px-4 py-2 w-40">
            <p class='flex items-center gap-2 capitalize'>
              <i class="fas fa-ellipsis-v"></i>
            </p>
          </button>

          <div data-dropdown-target="menu" class="hidden text-xs rounded flex flex-col gap-2 absolute bg-gray-900 text-white top-8 right-0 py-2 w-full z-10">
            <%= link_to edit_location_path(location), class: 'hover:text-blue-500 px-4 py-2 rounded flex items-center' do %>
              <i class='fas fa-pencil-alt' title="edit"></i>
              <span class='ml-2'>Edit</span>
            <% end %>
            <hr class='border border-gray-700'>
            <%= button_to location_path(location), method: :delete, data: { confirm: 'Are you sure you want to delete this location?' }, class: 'hover:text-red-500 px-4 py-2 rounded flex items-center' do %>
              <i class='fas fa-trash-alt' title="delete"></i>
              <span class='ml-2'>Delete</span>
            <% end %>
          </div>
        </div>

      </div>
    <% end %>
  </div>
</div>